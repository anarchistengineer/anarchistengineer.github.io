<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Anarchist Engineer - Building a Static Site Generator</title>
  <meta name="description" content="Anarchist Engineer">
  <meta name="author" content="Jeremy Darling <jeremy.darling@gmail.com">

  <link rel="stylesheet" href="/style/site.css?v=1.0">
  <link rel="stylesheet" href="/style/syntax.css?v=1.0">
  <link rel="icon" href="/images/favicon.ico?v=1.0">

  <script type="text/javascript" src="/js/loader.js"></script>

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  <img class="fist" src="/images/Anarchist_Engineer_300.png" alt="" />
  <div class="pagewrapper">
    <div class="pageheader" aria-role="banner">
      <h1><a href="/index.html">Anarchist Engineer</a></h1>
      <ul class="nav">
        <li><a class="" href="/index.html">Home</a></li>
        <li><a class="" href="/posts.html">Posts</a></li>
        <li><a class="" href="/repos.html">Code</a></li>
        <li><a class="" href="/about.html">About Me</a></li>
      </ul>
      <p class="subtitle">The 1990's called and they want this site back.</p>
    </div>
    <div class="content" aria-role="main">
      <p>When I decided to start a site to put everything on I decided that I didn&apos;t want to run a complete CMS solution instead I wanted something simple and easy that worked with Markdown.</p>
<p>I looked at a lot of existing static site generators; Jekyll, GitBook, Hugo, Octopress, Metalsmith, Wintersmith, Docpad, and more.</p>
<p>What I kept running into was &quot;I had a super simple HTML markup template, I had mardown files with my content, and I just wanted to generate the damned site from those!&quot;  I didn&apos;t want to install a heavy weight framework, have built in workflow, and other wonderful magic (that you may want).  I wanted simple.  Was that too much to ask?  Apparently.</p>
<p>So, screw it, Anarchist Ahoy!  Let&apos;s build a static site generator.</p>
<h2 id="user-content-taxonomy" class="deep-link"><a href="#taxonomy">Taxonomy</a></h2>
<p><em>That&apos;s a fancy word for placing stuff where it belongs.</em></p>
<p>I chose to put everything basically in the root of the repo, then have the publisher script create a folder called &quot;site&quot; that would then be pushed to the gh-pages branch in Github using subtree&apos;s.  This was after a LOT of reading and random finds on the good ol&apos; Google.</p>
<p>The structure looks like:</p>
<ul>
<li>fonts/ - Web fonts</li>
<li>images/ - Images</li>
<li>js/ - JavaScript source files, haven&apos;t needed this yet</li>
<li>pages/ - Holds the source Markdown for the pages</li>
<li>site/ - Generated site</li>
<li>solarized-dark-syntax/ - Syntax highlighter styles for code</li>
<li>style/ - Stylesheets</li>
<li>tools/ - Scripts and stuff</li>
</ul>
<h2 id="user-content-tooling" class="deep-link"><a href="#tooling">Tooling</a></h2>
<p>Ok, break out your terminal and favorite editor, its time to get to some code.</p>
<p>First we need to determine what exactly we want to do.  So in this case its take a simple HTML template file that uses Handlebars for fluffing out the actual page, grab a bunch of Markdown files from different directories (pages/ for pages, posts/ for posts), highlight any source code in those files, and publish them to a folder.</p>
<p>Great, we need libraries for Markdown parsing, handling Handlebars templates, and grabbing all the files.</p>
<ul>
<li><a href="https://github.com/isaacs/node-glob">Glob</a> - That will grab the files based on a &quot;glob&quot;</li>
<li><a href="https://github.com/npm/marky-markdown">marky-markdown</a> - Markdown processor with built in code highlighting from NPM!</li>
<li><a href="https://github.com/caolan/async">Async</a> - Utility stuff</li>
<li><a href="https://github.com/substack/node-mkdirp">mkdirp</a> - Create directories recursively</li>
<li><a href="https://github.com/moment/moment">moment</a> - Displaying dates</li>
<li><a href="https://github.com/datejs/Datejs">datejs</a> - Date parsing</li>
<li><a href="https://github.com/RIAEvangelist/node-http-server">node-http-server</a> - Development mode!</li>
<li><a href="https://github.com/remy/nodemon">nodemon</a> - Development mode!</li>
<li><a href="https://github.com/gulpjs/glob-watcher">glob-watcher</a> - Development mode!</li>
</ul>
<p>I&apos;m going to use Node v6.3.0 and ES6 to build the generator.</p>
<h2 id="user-content-getting-setup" class="deep-link"><a href="#getting-setup">Getting setup</a></h2>
<p>So first thing I did:</p>
<div class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span>git&#xA0;init</span></span></div><div class="line"><span class="source shell"><span>npm&#xA0;init</span></span></div><div class="line"><span class="source shell"><span>{bla&#xA0;bla}</span></span></div><div class="line"><span class="source shell"><span>npm&#xA0;install&#xA0;--save&#xA0;glob&#xA0;marky-markdown&#xA0;async&#xA0;mkdirp&#xA0;moment&#xA0;datejs&#xA0;node-http-server&#xA0;nodemon&#xA0;glob-watcher</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;pages</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;posts</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;images</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;js</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;style</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;tools</span></span></div><div class="line"><span class="source shell"><span>git&#xA0;clone&#xA0;git@github.com:atom/solarized-dark-syntax.git</span></span></div></pre></div>
<h2 id="user-content-build-script" class="deep-link"><a href="#build-script">Build script</a></h2>
<p>Next up was to create the tools/build.sh script that would do all the work like removing the old site/ creating a new one, coping over images, fonts, JavaScript, and styles.  It would then need to compile the syntax highlighting styles and copy those over to the site/style/ folder.  No default styles ship with marky-markdown and it took me forever to figure out that you can basically use any syntax highlighter styles for Atom with marky-markdown.  Cool!</p>
<div class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>!/bin/bash</span><span>&#xA0;</span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>rm&#xA0;-rf&#xA0;site</span></span></div><div class="line"><span class="source shell"><span>mkdir&#xA0;site</span></span></div><div class="line"><span class="source shell"><span>cp&#xA0;-r&#xA0;fonts/&#xA0;site/fonts/</span></span></div><div class="line"><span class="source shell"><span>cp&#xA0;-r&#xA0;images/&#xA0;site/images/</span></span></div><div class="line"><span class="source shell"><span>cp&#xA0;-r&#xA0;js/&#xA0;site/js/</span></span></div><div class="line"><span class="source shell"><span>cp&#xA0;-r&#xA0;style/&#xA0;site/style/</span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>rm&#xA0;-f&#xA0;style/syntax.css</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&#xA0;solarized-dark-syntax/</span></span></div><div class="line"><span class="source shell"><span>node&#xA0;../node_modules/.bin/lessc&#xA0;--include-path=styles&#xA0;index.less&#xA0;../style/syntax.css</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>cd</span></span><span>&#xA0;..</span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>node&#xA0;tools/generator.js</span></span></div></pre></div>
<p>Yep, that looks about right.  Of course it took a couple tries to get it right, but I don&apos;t figure you care to see the failed attempts.</p>
<h2 id="user-content-generator" class="deep-link"><a href="#generator">Generator</a></h2>
<p>Now we need a way to take our source files, collect a list, compile them, and put them in the output project.  Rather than dump the code for this beast on the page, I&apos;ll just link you to <a href="https://github.com/anarchistengineer/anarchistengineer.github.io/blob/master/tools/generator.js">tools/generator.js</a></p>
<p>There are a few key points that might be useful for you to understand though:</p>
<h3 id="user-content-loadpage" class="deep-link"><a href="#loadpage">loadPage</a></h3>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>loadPage</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>basePath</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;linkPath</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;filename</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable parameter function js"><span>callback</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="variable other object js"><span>fs</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>readFile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>filename</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>err</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable parameter function js"><span>buffer</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>source</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>buffer</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toString</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>infoSource</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>reInfoSource</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>exec</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>source</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>pageContent</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>source</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>replace</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>reInfoSource</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>trim</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>link</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>filename</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>replace</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>basePath</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;linkPath</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>replace</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string regexp js"><span class="punctuation definition string begin js"><span>/</span></span><span class="constant character escape backslash regexp"><span>\.</span></span><span>md</span><span class="keyword control anchor regexp"><span>$</span></span><span class="punctuation definition string end js"><span>/</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>.html</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>headerSettings</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta brace round js"><span>(</span></span><span>infoSource</span><span class="keyword operator js"><span>?</span></span><span>infoSource</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>trim</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>split</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span class="constant character escape js"><span>\n</span></span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="keyword operator js"><span>:</span></span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta brace round js"><span>)</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>s</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>s</span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>s</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="keyword operator comparison js"><span>===</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>#</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>segments</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>s</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>split</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>:</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>key</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>segments</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>shift</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="keyword operator logical js"><span>||</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>trim</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>value</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>transformValue</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>key</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable other object js"><span>segments</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>join</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>:</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>trim</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span class="meta brace square js"><span>[</span></span><span>key</span><span class="meta brace square js"><span>]</span></span><span class="keyword operator js"><span>:</span></span><span>&#xA0;value</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>reduce</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>o</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable parameter function js"><span>v</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;o</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>order</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>pageSettings</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;headerSettings</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>sourcefile</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;filename</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;destinationfile</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;outputPath</span><span class="keyword operator js"><span>+</span></span><span>link</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;link</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;source</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;pageContent</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>callback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;pageSettings</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<p>loadPage takes care of the dirty work of actually loading in a source Markdown file, reads in the settings associated with the file, and returns an object that contains all the settings and base content for the page.</p>
<p>One of the big workers here is transformValue, its job is to take a setting value, determine the type, and then return it cast as that type:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>transformValue</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>key</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable parameter function js"><span>v</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>isNumeric</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="keyword operator js"><span>+</span></span><span>v</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span class="constant other object js"><span>DATE_FIELDS</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>includes</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>key</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="support class js"><span>Date</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>parse</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span class="string regexp js"><span class="punctuation definition string begin js"><span>/</span></span><span class="keyword control anchor regexp"><span>^</span></span><span class="meta group regexp"><span class="punctuation definition group regexp"><span>(</span></span><span>true</span><span class="keyword operator or regexp"><span>|</span></span><span>t</span><span class="keyword operator or regexp"><span>|</span></span><span>y</span><span class="keyword operator or regexp"><span>|</span></span><span>yes</span><span class="punctuation definition group regexp"><span>)</span></span></span><span class="keyword control anchor regexp"><span>$</span></span><span class="punctuation definition string end js"><span>/</span></span><span>i</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>exec</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>moment</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span class="string regexp js"><span class="punctuation definition string begin js"><span>/</span></span><span class="keyword control anchor regexp"><span>^</span></span><span class="meta group regexp"><span class="punctuation definition group regexp"><span>(</span></span><span>false</span><span class="keyword operator or regexp"><span>|</span></span><span>f</span><span class="keyword operator or regexp"><span>|</span></span><span>n</span><span class="keyword operator or regexp"><span>|</span></span><span>no</span><span class="punctuation definition group regexp"><span>)</span></span></span><span class="keyword control anchor regexp"><span>$</span></span><span class="punctuation definition string end js"><span>/</span></span><span>i</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>exec</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>v</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="keyword control js"><span>return</span></span><span>&#xA0;v</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<h3 id="user-content-processpages" class="deep-link"><a href="#processpages">processPages</a></h3>
<p>processPages is the workhorse that actually takes the source files, compiles them, merges them with the HTML template file, and then outputs the final file.</p>
<p>A key here is that we actually have to call Handlebars twice.  The first time is against the Markdown source to transform it and expand it for things like the posts listing.  Next the modified source gets ran through marky-markdown to create the output HTML.  Finally we take the template (created with Handlebars), combine it with the compiled HTML, and save out the final file.</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>processPages</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>pkg</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>toProcess</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>pkg</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>pages</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>concat</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>pkg</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>posts</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>done</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="entity name type object console js"><span>console</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>All&#xA0;done</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="storage modifier js"><span>async</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>each</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>toProcess</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>page</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable parameter function js"><span>next</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="entity name type object console js"><span>console</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>page</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sourcefile</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>-&gt;</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="variable other object js"><span>page</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>destinationfile</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>pageContents</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>marky</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>Handlebars</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>compile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>page</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>source</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>noEscape</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>(</span></span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;pkg</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>page</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>sanitize</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>html</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>pageSettings</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;page</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>content</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;pageContents</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>source</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>template</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;pkg</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>page</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;pageSettings</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>folder</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>path</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>dirname</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>page</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>destinationfile</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>mkdirp</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>folder</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta function-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="variable other object js"><span>fs</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>writeFile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>page</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>destinationfile</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;source</span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>next</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta function-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>next</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span class="meta function-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;done</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<h2 id="user-content-development" class="deep-link"><a href="#development">Development</a></h2>
<p>I wanted a way to work on the Anarchist Engineer site without having to actually deploy it to Github Pages.  So in with node-http-server, a simple dev.js script and a quick npm script:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>scripts</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>dev</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>tools/build.sh;&#xA0;nodemon&#xA0;dev</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div></pre></div>
<p>Ok, we now have an NPM script to launch dev mode, we just need a server to serve the content.  26 lines of JavaScript later and <a href="https://github.com/anarchistengineer/anarchistengineer.github.io/blob/master/dev.js">dev.js</a> was complete:</p>
<div class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>watcher</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>glob-watcher</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>fork</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>child_process</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>fork</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>server</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>node-http-server</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>path</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>path</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>build</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>callback</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>child</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>fork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>./tools/generator.js</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="variable other object js"><span>child</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>on</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>close</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="meta function-call js"><span class="entity name function js"><span>callback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>fileUpdated</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>done</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>build</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta function-call js"><span class="entity name function js"><span>done</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&#xA0;&#xA0;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>watcher</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>./pages/**/*.md</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>./posts/**/*.md</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>./index.html</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;fileUpdated</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>build</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>const</span></span><span>&#xA0;</span><span class="constant other js"><span>config</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&#xA0;</span><span class="entity name type instance js"><span>server.Config</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>config</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>contentType</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>woff</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>application/x-font-woff</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>config</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>port</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="constant numeric decimal js"><span>8080</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>config</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>root</span></span><span>&#xA0;</span><span class="keyword operator assignment js"><span>=</span></span><span>&#xA0;</span><span class="variable other object js"><span>path</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>resolve</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>site</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>server</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>deploy</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>config</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<p>This simple wrapper basically sets up a glob watcher to wait for files to change.  When they do it runs the generator.  Then it stands up a simple static server with a custom contentType for the woff Font File&apos;s, and serves everything up on 8080.  Not bad.</p>
<p>Sure, it could use some tweaks, but hey it works.</p>
<h2 id="user-content-publishing-script" class="deep-link"><a href="#publishing-script">Publishing script</a></h2>
<p>For publishing I wanted to be able to pass in options like version, patch, minor, major increment, don&apos;t publish, don&apos;t build, etc...  So I started with a basic shell script I keep in Gist for just these types of things <a href="https://gist.github.com/jdarling/ce7a6878e2177d89634e6b588d7906c3">publish.sh</a></p>
<p>Then I tweaked it to fit the project needs:</p>
<div class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>!/bin/bash</span><span>&#xA0;</span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>tools/build.sh</span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>MAJOR=</span><span class="support function builtin shell"><span>false</span></span></span></div><div class="line"><span class="source shell"><span>MINOR=</span><span class="support function builtin shell"><span>false</span></span></span></div><div class="line"><span class="source shell"><span>PATCH=</span><span class="support function builtin shell"><span>false</span></span></span></div><div class="line"><span class="source shell"><span>UPREV=</span><span class="support function builtin shell"><span>false</span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>THIS_FOLDER=</span><span class="string interpolated backtick shell"><span class="punctuation definition string begin shell"><span>`</span></span><span class="support function builtin shell"><span>pwd</span></span><span class="punctuation definition string end shell"><span>`</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>PUSH=</span><span class="support function builtin shell"><span>true</span></span></span></div><div class="line"><span class="source shell"><span>PUBLISH=</span><span class="support function builtin shell"><span>true</span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="entity name function shell"><span>Showhelp</span></span><span>&#xA0;</span><span class="punctuation definition arguments shell"><span>()</span></span><span>&#xA0;</span><span class="meta scope group shell"><span class="punctuation definition group shell"><span>{</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>./publish.sh&#xA0;&lt;options&gt;</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;Options</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;-h&#xA0;or&#xA0;--help&#xA0;-&#xA0;Show&#xA0;this&#xA0;screen</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;-v&#xA0;&lt;version&gt;&#xA0;or&#xA0;--version&#xA0;&lt;version&gt;&#xA0;-&#xA0;Set&#xA0;the&#xA0;version&#xA0;number&#xA0;explicitly</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;-M&#xA0;or&#xA0;--major&#xA0;-&#xA0;Increment&#xA0;Major&#xA0;version&#xA0;number,&#xA0;reset&#xA0;minor&#xA0;and&#xA0;patch</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;-m&#xA0;or&#xA0;--minor&#xA0;-&#xA0;Increment&#xA0;Minor&#xA0;version&#xA0;number,&#xA0;reset&#xA0;patch</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;-p&#xA0;or&#xA0;--patch&#xA0;-&#xA0;Increment&#xA0;Patch&#xA0;version&#xA0;number</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;--msg&#xA0;or&#xA0;--message&#xA0;-&#xA0;Set&#xA0;the&#xA0;commit&#xA0;message,&#xA0;if&#xA0;not&#xA0;supplied&#xA0;version&#xA0;will&#xA0;be&#xA0;used</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;--nopush&#xA0;-&#xA0;Don&apos;t&#xA0;push&#xA0;the&#xA0;changes&#xA0;to&#xA0;git</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;--nopublish&#xA0;-&#xA0;Don&apos;t&#xA0;publish&#xA0;on&#xA0;NPM</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;version&#xA0;-&#xA0;Output&#xA0;current&#xA0;version&#xA0;number</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>exit</span></span><span>&#xA0;0</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span class="punctuation definition group shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>while</span></span><span>&#xA0;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[[</span></span><span>&#xA0;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>#</span></span><span>&#xA0;</span><span class="keyword operator logical shell"><span>&gt;</span></span><span>&#xA0;0&#xA0;</span><span class="punctuation definition logical-expression shell"><span>]]</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&#xA0;&#xA0;key=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>1</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&#xA0;&#xA0;</span><span class="meta scope case-block shell"><span class="keyword control shell"><span>case</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>key</span></span><span>&#xA0;</span><span class="meta scope case-body shell"><span>in</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>-M</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--major</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;MAJOR=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;UPREV=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>-m</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--minor</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;MINOR=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;UPREV=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>-p</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--patch</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;PATCH=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;UPREV=</span><span class="support function builtin shell"><span>true</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>-v</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--version</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;VERSION=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>2</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="support function builtin shell"><span>shift</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>--msg</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--message</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;MESSAGE=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>2</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="support function builtin shell"><span>shift</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>version</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>VERSION</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="support function builtin shell"><span>exit</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>--nopush</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--no-push</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;PUSH=</span><span class="support function builtin shell"><span>false</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>--nopublish</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--no-publish</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;PUBLISH=</span><span class="support function builtin shell"><span>false</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span>-h</span><span class="punctuation separator pipe-sign shell"><span>|</span></span><span>--help</span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;Showhelp</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="meta scope case-clause shell"><span class="meta scope case-pattern shell"><span class="keyword operator glob shell"><span>*</span></span><span class="punctuation definition case-pattern shell"><span>)</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span class="punctuation whitespace comment leading shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&#xA0;unknown&#xA0;option</span><span>&#xA0;</span></span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span class="meta scope case-clause shell"><span class="meta scope case-clause-body shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class="punctuation terminator case-clause shell"><span>;;</span></span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="meta scope case-block shell"><span class="meta scope case-body shell"><span>&#xA0;&#xA0;</span></span><span class="keyword control shell"><span>esac</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>shift</span></span><span>&#xA0;</span><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&#xA0;past&#xA0;argument&#xA0;or&#xA0;value</span><span>&#xA0;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span>git&#xA0;add&#xA0;</span><span class="support function builtin shell"><span>.</span></span></span></div><div class="line"><span class="source shell"><span>git&#xA0;commit&#xA0;-m&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>MESSAGE</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&#xA0;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[[</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>ORIG_VERSION</span></span><span>&#xA0;</span><span class="keyword operator logical shell"><span>!=</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>VERSION</span></span><span>&#xA0;</span><span class="punctuation definition logical-expression shell"><span>]]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&#xA0;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;npm&#xA0;version&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>VERSION</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&#xA0;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[[</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>PUSH</span></span><span>&#xA0;</span><span class="punctuation definition logical-expression shell"><span>]]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&#xA0;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Pushing&#xA0;changes&#xA0;to&#xA0;git</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;git&#xA0;push&#xA0;origin&#xA0;master</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&#xA0;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[[</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>PUBLISH</span></span><span>&#xA0;</span><span class="keyword operator logical shell"><span>&amp;&amp;</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>ORIG_VERSION</span></span><span>&#xA0;</span><span class="keyword operator logical shell"><span>!=</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>VERSION</span></span><span>&#xA0;</span><span class="punctuation definition logical-expression shell"><span>]]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&#xA0;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>read</span></span><span>&#xA0;-p&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Are&#xA0;you&#xA0;sure&#xA0;your&#xA0;ready&#xA0;to&#xA0;publish?&#xA0;(y/n)&#xA0;</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&#xA0;-n&#xA0;1&#xA0;-r</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&#xA0;(optional)&#xA0;move&#xA0;to&#xA0;a&#xA0;new&#xA0;line</span><span>&#xA0;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&#xA0;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[[</span></span><span>&#xA0;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>REPLY</span></span><span>&#xA0;</span><span class="keyword operator logical shell"><span>=~</span></span><span>&#xA0;^[Yy]$&#xA0;</span><span class="punctuation definition logical-expression shell"><span>]]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&#xA0;</span><span class="keyword control shell"><span>then</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;git&#xA0;subtree&#xA0;push&#xA0;--prefix&#xA0;site&#xA0;origin&#xA0;gh-pages</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="keyword control shell"><span>else</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Ok&#xA0;try&#xA0;again&#xA0;when&#xA0;your&#xA0;ready</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="meta scope if-block shell"><span>&#xA0;&#xA0;</span><span class="keyword control shell"><span>fi</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&#xA0;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&#xA0;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Done</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div></pre></div>
<h2 id="user-content-done" class="deep-link"><a href="#done">Done</a></h2>
<p>Now all I have to do is create markdown files, put them in the proper folder, set a few attributes in the file headings and run my ./publish.sh script.  Few moments later, here ya go, a Github Pages site generated with my very own static site generator.</p>
<p>All the code is on github in the <a href="https://github.com/anarchistengineer/anarchistengineer.github.io">anarchistengineer.github.io</a> project.</p>
<h2 id="user-content-final-thoughts" class="deep-link"><a href="#final-thoughts">Final thoughts</a></h2>
<p>That&apos;s it.  A few hours worth of work and here we have a custom static site generator complete.  In fact it took me longer to write this post than it did the write the static site generator itself.</p>
<p>Would I do it all again, absolutely.  Would I use something like Jekyll, absolutely.  Just depends on your wants and needs.  In this case I had a want to give it a shot and a basic need to create a static site on Github Pages.</p>
<p>Until next time, hopefully you got something useful from this,</p>
<ul>
<li>Anarchist Engineer</li>
</ul>

    </div>
    <footer>
      <p>Content Copyright&copy; 2016-current Anarchist Engineer (Jeremy Darling)</p>
      <p>This site is ugly on purpose.</p>
    </footer>
  </div>
</body>
</html>
